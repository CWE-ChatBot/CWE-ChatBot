# CWE ChatBot Environment Configuration
#
# IMPORTANT: This file is for LOCAL DEVELOPMENT ONLY.
# For production, secrets are retrieved from GCP Secret Manager automatically.
# See: SECRETS.md for Secret Manager architecture
#
# SOURCE OF TRUTH: src/app_config.py defines all configuration with defaults
# This .env file is only needed if you want to override defaults locally.

# ============================================================================
# REQUIRED FOR LOCAL DEVELOPMENT
# ============================================================================

# Database Connection (use actual DB or local PostgreSQL)
POSTGRES_HOST=localhost              # Production: 10.43.0.3 (Cloud SQL Private IP)
POSTGRES_PORT=5432
POSTGRES_DATABASE=cwe_chatbot
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_local_password  # Production: Retrieved from Secret Manager

# Google Gemini API Key (get from https://makersuite.google.com/app/apikey)
GEMINI_API_KEY=your_gemini_api_key    # Production: Retrieved from Secret Manager

# GCP Project (enables Secret Manager in production)
GOOGLE_CLOUD_PROJECT=cwechatbot

# ============================================================================
# OPTIONAL - OVERRIDE DEFAULTS (see src/app_config.py for all options)
# ============================================================================

# Uncomment to customize (defaults are in app_config.py)

# LLM Configuration
# LLM_PROVIDER=google
# LLM_MODEL_NAME=gemini-2.5-flash-lite
# LLM_TEMPERATURE=0.1

# Retrieval Configuration (RAG)
# RRF_W_VEC=0.65
# RRF_W_FTS=0.25
# RRF_W_ALIAS=0.10
# MAX_RETRIEVAL_RESULTS=5

# Security Configuration
# MAX_INPUT_LENGTH=1000
# ENABLE_STRICT_SANITIZATION=true

# CORS Configuration (REQUIRED for production)
# Sets the allowed origin for cross-origin requests
# Production: https://cwe.crashedmind.com
# Local dev: http://localhost:8080
PUBLIC_ORIGIN=http://localhost:8080

# OAuth Configuration (REQUIRED for REST API authentication)
# Google OAuth (primary provider)
OAUTH_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# OAUTH_GOOGLE_CLIENT_SECRET=your_google_client_secret  # For OAuth flow (Chainlit UI)

# GitHub OAuth (optional secondary provider)
# OAUTH_GITHUB_CLIENT_ID=
# OAUTH_GITHUB_CLIENT_SECRET=

# Chainlit session secret (required for UI)
# CHAINLIT_AUTH_SECRET=

# ============================================================================
# OIDC/JWT VERIFICATION (REST API) - New in R16
# ============================================================================
# These settings configure JWT verification for REST API endpoints (/api/v1/*).
# Default values work with Google ID tokens out of the box.

# OIDC Issuer (default: https://accounts.google.com)
# Override for other OIDC providers (Azure AD, Okta, Auth0, etc.)
# OIDC_ISSUER=https://accounts.google.com

# JWKS URL for public key retrieval (default: Google's JWKS endpoint)
# Override for other OIDC providers
# OIDC_JWKS_URL=https://www.googleapis.com/oauth2/v3/certs

# JWT Audience - Expected 'aud' claim (default: uses OAUTH_GOOGLE_CLIENT_ID)
# For multiple audiences, separate with commas: "aud1,aud2,aud3"
# OIDC_AUDIENCE=

# Require email_verified claim (default: true)
# Set to 'false' to allow unverified emails (NOT recommended)
# OIDC_REQUIRE_EMAIL_VERIFIED=true

# ============================================================================
# PRODUCTION DEPLOYMENT NOTES
# ============================================================================
#
# Production uses Secret Manager (NO .env file needed):
# - Secrets retrieved automatically at runtime from GCP Secret Manager
# - Only non-sensitive env vars set via gcloud run deploy --set-env-vars
# - See apps/chatbot/deploy.sh for deployment configuration
#
# Production secrets in Secret Manager:
# - db-password-app-user
# - gemini-api-key
# - chainlit-auth-secret
# - oauth-google-client-id
# - oauth-google-client-secret
# - oauth-github-client-id (optional)
# - oauth-github-client-secret (optional)
#
# For complete configuration reference, see:
# - src/app_config.py (authoritative source of all config with defaults)
# - SECRETS.md (Secret Manager architecture)
# - DEPLOYMENT_SIMPLIFIED.md (deployment guide)
